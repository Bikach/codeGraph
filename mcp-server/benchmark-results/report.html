<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLM Tool Benchmark Report</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <style>
    :root {
      --optimized: #22c55e;
      --baseline: #ef4444;
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 0.5rem;
    }

    header p {
      color: var(--text-muted);
      font-size: 1rem;
    }

    .card {
      background: var(--card);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      border: 1px solid var(--border);
    }

    .card h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--text);
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .metric-card {
      background: linear-gradient(135deg, var(--optimized) 0%, #16a34a 100%);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      color: white;
    }

    .metric-card.baseline {
      background: linear-gradient(135deg, var(--baseline) 0%, #dc2626 100%);
    }

    .metric-value {
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1.2;
    }

    .metric-label {
      font-size: 0.875rem;
      opacity: 0.9;
      margin-top: 0.25rem;
    }

    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 1.5rem;
    }

    .chart-container {
      position: relative;
      height: 350px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    th, td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    th {
      background: var(--bg);
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.05em;
    }

    tr:hover td {
      background: var(--bg);
    }

    .savings-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-weight: 600;
      font-size: 0.75rem;
      background: #dcfce7;
      color: #166534;
    }

    .savings-badge.negative {
      background: #fee2e2;
      color: #991b1b;
    }

    .legend {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: var(--card);
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1rem;
      font-weight: 500;
    }

    .legend-dot {
      width: 16px;
      height: 16px;
      border-radius: 4px;
    }

    .legend-dot.optimized {
      background: var(--optimized);
    }

    .legend-dot.baseline {
      background: var(--baseline);
    }

    .config-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      font-size: 0.875rem;
    }

    .config-item {
      display: flex;
      flex-direction: column;
    }

    .config-item label {
      color: var(--text-muted);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .config-item span {
      font-weight: 500;
    }

    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }

      header h1 {
        font-size: 1.75rem;
      }

      .charts-grid {
        grid-template-columns: 1fr;
      }

      .chart-container {
        height: 300px;
      }

      table {
        font-size: 0.75rem;
      }

      th, td {
        padding: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>LLM Tool Benchmark Report</h1>
      <p>Optimized vs Baseline Comparison - Generated: 2025-12-18T15:17:27.327Z</p>
    </header>

    <div class="card">
      <h2>Average Savings with Optimized Approach</h2>
      <div class="summary-grid">
        <div class="metric-card">
          <div class="metric-value">65%</div>
          <div class="metric-label">Fewer LLM Calls</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">55%</div>
          <div class="metric-label">Tokens Saved</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">9%</div>
          <div class="metric-label">Cost Reduction</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">6%</div>
          <div class="metric-label">Faster Execution</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Total Cost Comparison</h2>
      <div class="summary-grid">
        <div class="metric-card">
          <div class="metric-value">$0.6409</div>
          <div class="metric-label">Optimized Total Cost</div>
        </div>
        <div class="metric-card baseline">
          <div class="metric-value">$0.6864</div>
          <div class="metric-label">Baseline Total Cost</div>
        </div>
      </div>
    </div>

    <div class="legend">
      <div class="legend-item">
        <span class="legend-dot optimized"></span>
        <span>Optimized (Specialized Tools)</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot baseline"></span>
        <span>Baseline (Generic Tools)</span>
      </div>
    </div>

    <div class="charts-grid">
      <div class="card">
        <h2>LLM Calls per Scenario</h2>
        <div class="chart-container">
          <canvas id="llmCallsChart"></canvas>
        </div>
      </div>

      <div class="card">
        <h2>Token Usage per Scenario</h2>
        <div class="chart-container">
          <canvas id="tokensChart"></canvas>
        </div>
      </div>

      <div class="card">
        <h2>Cost per Scenario ($)</h2>
        <div class="chart-container">
          <canvas id="costChart"></canvas>
        </div>
      </div>

      <div class="card">
        <h2>Execution Time per Scenario (seconds)</h2>
        <div class="chart-container">
          <canvas id="timeChart"></canvas>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Detailed Results</h2>
      <div style="overflow-x: auto;">
        <table>
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Optimized Calls</th>
              <th>Baseline Calls</th>
              <th>Optimized Tokens</th>
              <th>Baseline Tokens</th>
              <th>Optimized Cost</th>
              <th>Baseline Cost</th>
              <th>Optimized Time</th>
              <th>Baseline Time</th>
              <th>Cost Savings</th>
            </tr>
          </thead>
          <tbody>
            
            <tr>
              <td><strong>Find Callers</strong><br><small style="color: var(--text-muted)">Find all functions that call a specific function</small></td>
              <td>10</td>
              <td>15</td>
              <td>1 194</td>
              <td>2 099</td>
              <td>$0.0787</td>
              <td>$0.1307</td>
              <td>32.2s</td>
              <td>55.6s</td>
              <td><span class="savings-badge">+40%</span></td>
            </tr>
            
            <tr>
              <td><strong>Find Implementations</strong><br><small style="color: var(--text-muted)">Find all classes that implement a specific interface</small></td>
              <td>10</td>
              <td>15</td>
              <td>1 211</td>
              <td>1 814</td>
              <td>$0.1080</td>
              <td>$0.1459</td>
              <td>32.3s</td>
              <td>49.4s</td>
              <td><span class="savings-badge">+26%</span></td>
            </tr>
            
            <tr>
              <td><strong>Impact Analysis</strong><br><small style="color: var(--text-muted)">Analyze the impact of modifying a class or function</small></td>
              <td>2</td>
              <td>15</td>
              <td>688</td>
              <td>1 922</td>
              <td>$0.2891</td>
              <td>$0.1481</td>
              <td>104.4s</td>
              <td>55.0s</td>
              <td><span class="savings-badge negative">-95%</span></td>
            </tr>
            
            <tr>
              <td><strong>Dependency Analysis</strong><br><small style="color: var(--text-muted)">Analyze all dependencies of a class (incoming and outgoing)</small></td>
              <td>2</td>
              <td>15</td>
              <td>570</td>
              <td>1 663</td>
              <td>$0.0735</td>
              <td>$0.1297</td>
              <td>36.8s</td>
              <td>51.7s</td>
              <td><span class="savings-badge">+43%</span></td>
            </tr>
            
            <tr>
              <td><strong>Call Chain</strong><br><small style="color: var(--text-muted)">Trace the call chain between two functions</small></td>
              <td>2</td>
              <td>15</td>
              <td>686</td>
              <td>2 091</td>
              <td>$0.0915</td>
              <td>$0.1321</td>
              <td>52.4s</td>
              <td>61.7s</td>
              <td><span class="savings-badge">+31%</span></td>
            </tr>
            
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <h2>Configuration</h2>
      <div class="config-info">
        <div class="config-item">
          <label>Project Path</label>
          <span>/Users/bikach/workspace/h-backend</span>
        </div>
        <div class="config-item">
          <label>Runs per Scenario</label>
          <span>1</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    Chart.register(ChartDataLabels);

    const scenarios = [{"scenarioName":"Find Callers","description":"Find all functions that call a specific function","optimized":{"llmCalls":10,"toolCalls":9,"totalTokens":1194,"inputTokens":44,"outputTokens":1150,"totalCost":0.07871629999999999,"executionTimeMs":32178},"baseline":{"llmCalls":15,"toolCalls":14,"totalTokens":2099,"inputTokens":51,"outputTokens":2048,"totalCost":0.13073365,"executionTimeMs":55625},"savings":{"tokens":43.11576941400667,"cost":39.788799593677695,"time":42.15191011235955,"llmCalls":33.33333333333333}},{"scenarioName":"Find Implementations","description":"Find all classes that implement a specific interface","optimized":{"llmCalls":10,"toolCalls":9,"totalTokens":1211,"inputTokens":42,"outputTokens":1169,"totalCost":0.10802224999999999,"executionTimeMs":32333},"baseline":{"llmCalls":15,"toolCalls":14,"totalTokens":1814,"inputTokens":56,"outputTokens":1758,"totalCost":0.1458743,"executionTimeMs":49436},"savings":{"tokens":33.24145534729879,"cost":25.948402151715566,"time":34.59624565094263,"llmCalls":33.33333333333333}},{"scenarioName":"Impact Analysis","description":"Analyze the impact of modifying a class or function","optimized":{"llmCalls":2,"toolCalls":32,"totalTokens":688,"inputTokens":8,"outputTokens":680,"totalCost":0.28913045000000004,"executionTimeMs":104359},"baseline":{"llmCalls":15,"toolCalls":14,"totalTokens":1922,"inputTokens":52,"outputTokens":1870,"totalCost":0.1480847,"executionTimeMs":54972},"savings":{"tokens":64.20395421436004,"cost":-95.24667301888718,"time":-89.84028232554755,"llmCalls":86.66666666666667}},{"scenarioName":"Dependency Analysis","description":"Analyze all dependencies of a class (incoming and outgoing)","optimized":{"llmCalls":2,"toolCalls":13,"totalTokens":570,"inputTokens":8,"outputTokens":562,"totalCost":0.07352205,"executionTimeMs":36836},"baseline":{"llmCalls":15,"toolCalls":14,"totalTokens":1663,"inputTokens":62,"outputTokens":1601,"totalCost":0.12966975,"executionTimeMs":51681},"savings":{"tokens":65.72459410703549,"cost":43.3005384833394,"time":28.724289390685165,"llmCalls":86.66666666666667}},{"scenarioName":"Call Chain","description":"Trace the call chain between two functions","optimized":{"llmCalls":2,"toolCalls":17,"totalTokens":686,"inputTokens":8,"outputTokens":678,"totalCost":0.09146939999999999,"executionTimeMs":52357},"baseline":{"llmCalls":15,"toolCalls":14,"totalTokens":2091,"inputTokens":51,"outputTokens":2040,"totalCost":0.13208014999999998,"executionTimeMs":61680},"savings":{"tokens":67.19273075083692,"cost":30.7470501812725,"time":15.115110246433202,"llmCalls":86.66666666666667}}];

    const chartOptions = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        datalabels: {
          anchor: 'end',
          align: 'top',
          color: '#1e293b',
          font: { weight: 'bold', size: 12 },
          formatter: (value) => value.toLocaleString()
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          grid: { color: '#e2e8f0' }
        },
        x: {
          grid: { display: false }
        }
      }
    };

    // LLM Calls Chart
    new Chart(document.getElementById('llmCallsChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'Optimized',
            data: scenarios.map(s => s.optimized.llmCalls),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Baseline',
            data: scenarios.map(s => s.baseline.llmCalls),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: {
        ...chartOptions,
        plugins: {
          ...chartOptions.plugins,
          datalabels: {
            ...chartOptions.plugins.datalabels,
            formatter: (value) => value + ' calls'
          }
        }
      }
    });

    // Tokens Chart
    new Chart(document.getElementById('tokensChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'Optimized',
            data: scenarios.map(s => s.optimized.totalTokens),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Baseline',
            data: scenarios.map(s => s.baseline.totalTokens),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: {
        ...chartOptions,
        plugins: {
          ...chartOptions.plugins,
          datalabels: {
            ...chartOptions.plugins.datalabels,
            formatter: (value) => (value / 1000).toFixed(1) + 'k'
          }
        }
      }
    });

    // Cost Chart
    new Chart(document.getElementById('costChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'Optimized',
            data: scenarios.map(s => s.optimized.totalCost),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Baseline',
            data: scenarios.map(s => s.baseline.totalCost),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: {
        ...chartOptions,
        plugins: {
          ...chartOptions.plugins,
          datalabels: {
            ...chartOptions.plugins.datalabels,
            formatter: (value) => '$' + value.toFixed(2)
          }
        }
      }
    });

    // Time Chart (convert to seconds)
    new Chart(document.getElementById('timeChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'Optimized',
            data: scenarios.map(s => s.optimized.executionTimeMs / 1000),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Baseline',
            data: scenarios.map(s => s.baseline.executionTimeMs / 1000),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: {
        ...chartOptions,
        plugins: {
          ...chartOptions.plugins,
          datalabels: {
            ...chartOptions.plugins.datalabels,
            formatter: (value) => value.toFixed(0) + 's'
          }
        }
      }
    });
  </script>
</body>
</html>