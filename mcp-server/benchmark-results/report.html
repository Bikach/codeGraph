<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Analysis Benchmark Report</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <style>
    :root {
      --optimized: #22c55e;
      --baseline: #ef4444;
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 0.5rem;
    }

    header p {
      color: var(--text-muted);
      font-size: 1rem;
    }

    .card {
      background: var(--card);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      border: 1px solid var(--border);
    }

    .card h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--text);
    }

    .card h3 {
      font-size: 1.1rem;
      font-weight: 600;
      margin: 1rem 0 0.5rem;
      color: var(--text);
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1rem;
    }

    .metric-card {
      background: linear-gradient(135deg, var(--optimized) 0%, #16a34a 100%);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      color: white;
    }

    .metric-card.baseline {
      background: linear-gradient(135deg, var(--baseline) 0%, #dc2626 100%);
    }

    .metric-card.neutral {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    }

    .metric-value {
      font-size: 2rem;
      font-weight: 700;
      line-height: 1.2;
    }

    .metric-label {
      font-size: 0.875rem;
      opacity: 0.9;
      margin-top: 0.25rem;
    }

    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 1.5rem;
    }

    .chart-container {
      position: relative;
      height: 350px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    th, td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    th {
      background: var(--bg);
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.05em;
    }

    tr:hover td {
      background: var(--bg);
    }

    .savings-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-weight: 600;
      font-size: 0.75rem;
      background: #dcfce7;
      color: #166534;
    }

    .savings-badge.negative {
      background: #fee2e2;
      color: #991b1b;
    }

    .score-badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.75rem;
    }

    .score-high { background: #dcfce7; color: #166534; }
    .score-medium { background: #fef9c3; color: #854d0e; }
    .score-low { background: #fee2e2; color: #991b1b; }

    .tool-badge {
      display: inline-block;
      padding: 0.125rem 0.5rem;
      border-radius: 4px;
      font-size: 0.7rem;
      background: #e0e7ff;
      color: #3730a3;
      margin: 0.125rem;
    }

    .tool-badge.correct { background: #dcfce7; color: #166534; }
    .tool-badge.wrong { background: #fee2e2; color: #991b1b; }

    .legend {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: var(--card);
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1rem;
      font-weight: 500;
    }

    .legend-dot {
      width: 16px;
      height: 16px;
      border-radius: 4px;
    }

    .legend-dot.optimized { background: var(--optimized); }
    .legend-dot.baseline { background: var(--baseline); }

    .response-container {
      margin-top: 1rem;
    }

    .response-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .response-box {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
    }

    .response-box h4 {
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .response-box.mcp h4 { color: var(--optimized); }
    .response-box.native h4 { color: var(--baseline); }

    .response-text {
      font-family: monospace;
      font-size: 0.75rem;
      white-space: pre-wrap;
      max-height: 200px;
      overflow-y: auto;
      background: white;
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px solid var(--border);
    }

    .response-meta {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .toggle-btn {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-size: 0.875rem;
      margin-top: 1rem;
    }

    .toggle-btn:hover {
      background: var(--border);
    }

    .config-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      font-size: 0.875rem;
    }

    .config-item {
      display: flex;
      flex-direction: column;
    }

    .config-item label {
      color: var(--text-muted);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .config-item span {
      font-weight: 500;
    }

    @media (max-width: 768px) {
      body { padding: 1rem; }
      header h1 { font-size: 1.75rem; }
      .charts-grid { grid-template-columns: 1fr; }
      .chart-container { height: 300px; }
      .response-grid { grid-template-columns: 1fr; }
      table { font-size: 0.75rem; }
      th, td { padding: 0.5rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Code Analysis Benchmark Report</h1>
      <p>MCP vs Native Comparison - Generated: 2025-12-18T20:24:42.183Z</p>
    </header>

    <div class="card">
      <h2>Summary</h2>
      <div class="summary-grid">
        <div class="metric-card">
          <div class="metric-value">49%</div>
          <div class="metric-label">Fewer LLM Calls</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">26%</div>
          <div class="metric-label">Cost Reduction</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">53%</div>
          <div class="metric-label">Faster</div>
        </div>
        <div class="metric-card neutral">
          <div class="metric-value">5.4</div>
          <div class="metric-label">MCP Quality /10</div>
        </div>
        <div class="metric-card neutral">
          <div class="metric-value">6.8</div>
          <div class="metric-label">Native Quality /10</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Total Cost Comparison</h2>
      <div class="summary-grid">
        <div class="metric-card">
          <div class="metric-value">$0.8267</div>
          <div class="metric-label">MCP Total Cost</div>
        </div>
        <div class="metric-card baseline">
          <div class="metric-value">$1.1141</div>
          <div class="metric-label">Native Total Cost</div>
        </div>
      </div>
    </div>

    <div class="legend">
      <div class="legend-item">
        <span class="legend-dot optimized"></span>
        <span>MCP</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot baseline"></span>
        <span>Native</span>
      </div>
    </div>

    <div class="charts-grid">
      <div class="card">
        <h2>LLM Calls per Scenario</h2>
        <div class="chart-container">
          <canvas id="llmCallsChart"></canvas>
        </div>
      </div>

      <div class="card">
        <h2>Cost per Scenario ($)</h2>
        <div class="chart-container">
          <canvas id="costChart"></canvas>
        </div>
      </div>

      <div class="card">
        <h2>Quality Score per Scenario</h2>
        <div class="chart-container">
          <canvas id="scoreChart"></canvas>
        </div>
      </div>

      <div class="card">
        <h2>Execution Time (seconds)</h2>
        <div class="chart-container">
          <canvas id="timeChart"></canvas>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Detailed Results</h2>
      <div style="overflow-x: auto;">
        <table>
          <thead>
            <tr>
              <th>Scenario</th>
              <th>MCP Calls</th>
              <th>Native Calls</th>
              <th>MCP Cost</th>
              <th>Native Cost</th>
              <th>MCP Score</th>
              <th>Native Score</th>
              <th>Cost Savings</th>
            </tr>
          </thead>
          <tbody>
            
            <tr>
              <td><strong>Find Callers</strong><br><small style="color: var(--text-muted)">Find all functions that call a specific function</small></td>
              <td>5</td>
              <td>7</td>
              <td>$0.1922</td>
              <td>$0.0907</td>
              <td><span class="score-badge score-high">7/10</span></td>
              <td><span class="score-badge score-high">8/10</span></td>
              <td><span class="savings-badge negative">-112%</span></td>
            </tr>
            
            <tr>
              <td><strong>Find Implementations</strong><br><small style="color: var(--text-muted)">Find all classes that implement a specific interface</small></td>
              <td>3</td>
              <td>10</td>
              <td>$0.0432</td>
              <td>$0.0682</td>
              <td><span class="score-badge score-high">8/10</span></td>
              <td><span class="score-badge score-high">8/10</span></td>
              <td><span class="savings-badge">+37%</span></td>
            </tr>
            
            <tr>
              <td><strong>Impact Analysis</strong><br><small style="color: var(--text-muted)">Analyze the impact of modifying a class or function</small></td>
              <td>20</td>
              <td>38</td>
              <td>$0.2628</td>
              <td>$0.4521</td>
              <td><span class="score-badge score-low">3/10</span></td>
              <td><span class="score-badge score-high">7/10</span></td>
              <td><span class="savings-badge">+42%</span></td>
            </tr>
            
            <tr>
              <td><strong>Dependency Analysis</strong><br><small style="color: var(--text-muted)">Analyze all dependencies of a class (incoming and outgoing)</small></td>
              <td>8</td>
              <td>37</td>
              <td>$0.1343</td>
              <td>$0.2505</td>
              <td><span class="score-badge score-high">8/10</span></td>
              <td><span class="score-badge score-high">8/10</span></td>
              <td><span class="savings-badge">+46%</span></td>
            </tr>
            
            <tr>
              <td><strong>Call Chain</strong><br><small style="color: var(--text-muted)">Trace the call chain between two functions</small></td>
              <td>14</td>
              <td>7</td>
              <td>$0.1942</td>
              <td>$0.2525</td>
              <td><span class="score-badge score-low">1/10</span></td>
              <td><span class="score-badge score-low">3/10</span></td>
              <td><span class="savings-badge">+23%</span></td>
            </tr>
            
          </tbody>
        </table>
      </div>
    </div>

    
    <div class="card">
      <h2>Find Callers</h2>
      <p style="color: var(--text-muted); margin-bottom: 1rem;">Find all functions that call a specific function</p>

      <h3>Quality Evaluation</h3>
      <div class="response-grid">
        <div class="response-box mcp">
          <h4>
            MCP
            <span class="score-badge score-high">7/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response is well-organized and shows relevant callers with file locations, but lacks verification that the tool was actually used and contains no evidence of the MCP server being queried—it appears to be a hypothetical example rather than actual tool execution results.</span>
          </div>
        </div>
        <div class="response-box native">
          <h4>
            Native
            <span class="score-badge score-high">8/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>Response effectively identifies the target function and provides a well-organized list of callers with file locations and context, though it mixes production and test code without clear separation and doesn&#039;t use the codebase&#039;s MCP tools (which would provide standardized output format and coverage verification).</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Find Implementations</h2>
      <p style="color: var(--text-muted); margin-bottom: 1rem;">Find all classes that implement a specific interface</p>

      <h3>Quality Evaluation</h3>
      <div class="response-grid">
        <div class="response-box mcp">
          <h4>
            MCP
            <span class="score-badge score-high">8/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response accurately identifies the interface and its implementation with correct file paths and line numbers, clearly explains the architecture pattern, but could be more comprehensive by checking for indirect implementations or mentioning if there are no additional implementations.</span>
          </div>
        </div>
        <div class="response-box native">
          <h4>
            Native
            <span class="score-badge score-high">8/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response accurately identifies the interface and its implementation with correct file paths and useful context about the Panache ORM pattern, though it could be more concise and uses somewhat verbose search narration rather than direct tool output.</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Impact Analysis</h2>
      <p style="color: var(--text-muted); margin-bottom: 1rem;">Analyze the impact of modifying a class or function</p>

      <h3>Quality Evaluation</h3>
      <div class="response-grid">
        <div class="response-box mcp">
          <h4>
            MCP
            <span class="score-badge score-low">3/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response shows effort in searching for the User class but lacks actual impact analysis output - it&#039;s mostly process narration without concrete findings, doesn&#039;t use the available impact analysis tools, and the truncated result suggests incomplete work that doesn&#039;t fulfill the requirement to &#039;return the impact analysis.&#039;</span>
          </div>
        </div>
        <div class="response-box native">
          <h4>
            Native
            <span class="score-badge score-high">7/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response demonstrates a systematic approach to impact analysis with clear identification of direct dependencies and attempted tracing of indirect dependents, but appears truncated and lacks verification that all affected code was actually found using proper graph traversal methods.</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Dependency Analysis</h2>
      <p style="color: var(--text-muted); margin-bottom: 1rem;">Analyze all dependencies of a class (incoming and outgoing)</p>

      <h3>Quality Evaluation</h3>
      <div class="response-grid">
        <div class="response-box mcp">
          <h4>
            MCP
            <span class="score-badge score-high">8/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response comprehensively identifies all dependencies (injections, imports, usage) with specific file locations and methods called, making it immediately useful for developers, though it could be slightly more structured with summary statistics.</span>
          </div>
        </div>
        <div class="response-box native">
          <h4>
            Native
            <span class="score-badge score-high">8/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response demonstrates a systematic approach to dependency analysis with clear navigation through the codebase, identifies key dependencies (repositories, ports, implementations), and provides structured output showing both injected dependencies and implementations, though it appears truncated and could benefit from showing the complete dependency graph visualization and reverse dependencies (what depends on LoginUseCase).</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Call Chain</h2>
      <p style="color: var(--text-muted); margin-bottom: 1rem;">Trace the call chain between two functions</p>

      <h3>Quality Evaluation</h3>
      <div class="response-grid">
        <div class="response-box mcp">
          <h4>
            MCP
            <span class="score-badge score-low">1/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>This response is fabricated - it references files and functions that don&#039;t exist in the provided codebase (CodeGraph MCP server for Kotlin code analysis), making it completely inaccurate and unhelpful for actual development work.</span>
          </div>
        </div>
        <div class="response-box native">
          <h4>
            Native
            <span class="score-badge score-low">3/10</span>
          </h4>
          <div class="response-meta" style="margin-top: 0;">
            <span>The response fabricates detailed file paths, line numbers, and code that don&#039;t exist in the actual codebase, providing false information that would mislead a developer rather than help them.</span>
          </div>
        </div>
      </div>
    </div>
    

    <div class="card">
      <h2>Configuration</h2>
      <div class="config-info">
        <div class="config-item">
          <label>Project Path</label>
          <span>/Users/bikach/workspace/h-backend</span>
        </div>
        <div class="config-item">
          <label>Runs per Scenario</label>
          <span>1</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    Chart.register(ChartDataLabels);

    const scenarios = [{"scenarioName":"Find Callers","description":"Find all functions that call a specific function","optimized":{"llmCalls":5,"toolCalls":4,"totalCost":0.19221774999999997,"executionTimeMs":25305,"score":7,"reasoning":"The response is well-organized and shows relevant callers with file locations, but lacks verification that the tool was actually used and contains no evidence of the MCP server being queried—it appears to be a hypothetical example rather than actual tool execution results."},"baseline":{"llmCalls":7,"toolCalls":6,"totalCost":0.0907411,"executionTimeMs":34893,"score":8,"reasoning":"Response effectively identifies the target function and provides a well-organized list of callers with file locations and context, though it mixes production and test code without clear separation and doesn't use the codebase's MCP tools (which would provide standardized output format and coverage verification)."},"savings":{"tokens":6,"cost":-111.83096744474108,"time":27.478290774653942,"llmCalls":28.57142857142857}},{"scenarioName":"Find Implementations","description":"Find all classes that implement a specific interface","optimized":{"llmCalls":3,"toolCalls":2,"totalCost":0.04320295,"executionTimeMs":15782,"score":8,"reasoning":"The response accurately identifies the interface and its implementation with correct file paths and line numbers, clearly explains the architecture pattern, but could be more comprehensive by checking for indirect implementations or mentioning if there are no additional implementations."},"baseline":{"llmCalls":10,"toolCalls":9,"totalCost":0.06821315,"executionTimeMs":25877,"score":8,"reasoning":"The response accurately identifies the interface and its implementation with correct file paths and useful context about the Panache ORM pattern, though it could be more concise and uses somewhat verbose search narration rather than direct tool output."},"savings":{"tokens":72.74604267033723,"cost":36.66477797902604,"time":39.01147737372957,"llmCalls":70}},{"scenarioName":"Impact Analysis","description":"Analyze the impact of modifying a class or function","optimized":{"llmCalls":20,"toolCalls":19,"totalCost":0.26277265,"executionTimeMs":78358,"score":3,"reasoning":"The response shows effort in searching for the User class but lacks actual impact analysis output - it's mostly process narration without concrete findings, doesn't use the available impact analysis tools, and the truncated result suggests incomplete work that doesn't fulfill the requirement to 'return the impact analysis.'"},"baseline":{"llmCalls":38,"toolCalls":53,"totalCost":0.4521384499999999,"executionTimeMs":180517,"score":7,"reasoning":"The response demonstrates a systematic approach to impact analysis with clear identification of direct dependencies and attempted tracing of indirect dependents, but appears truncated and lacks verification that all affected code was actually found using proper graph traversal methods."},"savings":{"tokens":52.9943241051778,"cost":41.882259737034076,"time":56.59245389630894,"llmCalls":47.368421052631575}},{"scenarioName":"Dependency Analysis","description":"Analyze all dependencies of a class (incoming and outgoing)","optimized":{"llmCalls":8,"toolCalls":7,"totalCost":0.13434525,"executionTimeMs":34217,"score":8,"reasoning":"The response comprehensively identifies all dependencies (injections, imports, usage) with specific file locations and methods called, making it immediately useful for developers, though it could be slightly more structured with summary statistics."},"baseline":{"llmCalls":37,"toolCalls":36,"totalCost":0.2504956,"executionTimeMs":89221,"score":8,"reasoning":"The response demonstrates a systematic approach to dependency analysis with clear navigation through the codebase, identifies key dependencies (repositories, ports, implementations), and provides structured output showing both injected dependencies and implementations, though it appears truncated and could benefit from showing the complete dependency graph visualization and reverse dependencies (what depends on LoginUseCase)."},"savings":{"tokens":71.50732127476314,"cost":46.36821964138292,"time":61.64916331356968,"llmCalls":78.37837837837837}},{"scenarioName":"Call Chain","description":"Trace the call chain between two functions","optimized":{"llmCalls":14,"toolCalls":13,"totalCost":0.19416015,"executionTimeMs":42504,"score":1,"reasoning":"This response is fabricated - it references files and functions that don't exist in the provided codebase (CodeGraph MCP server for Kotlin code analysis), making it completely inaccurate and unhelpful for actual development work."},"baseline":{"llmCalls":7,"toolCalls":73,"totalCost":0.2524824,"executionTimeMs":90572,"score":3,"reasoning":"The response fabricates detailed file paths, line numbers, and code that don't exist in the actual codebase, providing false information that would mislead a developer rather than help them."},"savings":{"tokens":8.290155440414509,"cost":23.099530897995262,"time":53.0715894536943,"llmCalls":-100}}];

    const chartOptions = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        datalabels: {
          anchor: 'end',
          align: 'top',
          color: '#1e293b',
          font: { weight: 'bold', size: 11 },
          formatter: (value) => value.toLocaleString()
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          grid: { color: '#e2e8f0' }
        },
        x: {
          grid: { display: false }
        }
      }
    };

    // LLM Calls Chart
    new Chart(document.getElementById('llmCallsChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'MCP',
            data: scenarios.map(s => s.optimized.llmCalls),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Native',
            data: scenarios.map(s => s.baseline.llmCalls),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: chartOptions
    });

    // Cost Chart
    new Chart(document.getElementById('costChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'MCP',
            data: scenarios.map(s => s.optimized.totalCost),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Native',
            data: scenarios.map(s => s.baseline.totalCost),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: {
        ...chartOptions,
        plugins: {
          ...chartOptions.plugins,
          datalabels: {
            ...chartOptions.plugins.datalabels,
            formatter: (value) => '$' + value.toFixed(2)
          }
        }
      }
    });

    // Score Chart
    new Chart(document.getElementById('scoreChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'MCP',
            data: scenarios.map(s => s.optimized.score),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Native',
            data: scenarios.map(s => s.baseline.score),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: {
        ...chartOptions,
        scales: {
          ...chartOptions.scales,
          y: {
            ...chartOptions.scales.y,
            max: 10
          }
        },
        plugins: {
          ...chartOptions.plugins,
          datalabels: {
            ...chartOptions.plugins.datalabels,
            formatter: (value) => value + '/10'
          }
        }
      }
    });

    // Time Chart
    new Chart(document.getElementById('timeChart'), {
      type: 'bar',
      data: {
        labels: scenarios.map(s => s.scenarioName),
        datasets: [
          {
            label: 'MCP',
            data: scenarios.map(s => s.optimized.executionTimeMs / 1000),
            backgroundColor: '#22c55e',
            borderRadius: 6,
            barPercentage: 0.4
          },
          {
            label: 'Native',
            data: scenarios.map(s => s.baseline.executionTimeMs / 1000),
            backgroundColor: '#ef4444',
            borderRadius: 6,
            barPercentage: 0.4
          }
        ]
      },
      options: {
        ...chartOptions,
        plugins: {
          ...chartOptions.plugins,
          datalabels: {
            ...chartOptions.plugins.datalabels,
            formatter: (value) => value.toFixed(0) + 's'
          }
        }
      }
    });
  </script>
</body>
</html>